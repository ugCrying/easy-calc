function r(r){let t="";for(let i=1;i<Math.abs(r);i++)t+="0";return r<0?"0."+t:t+"0"}function t(r){if("string"!=typeof r&&(r=i(r)),"0"===r[0]&&![void 0,"."].includes(r[1])){let t=0;for(let i=0;i<r.length&&("0"!==r[i]||[void 0,"."].includes(r[i+1])||t++,"0"===r[i]);i++);t>0&&(r=r.substring(t))}if(r.includes(".")){let t=r.substring(0,r.indexOf(".")+1),i=r.substring(r.indexOf(".")+1);for(let r=i.length-1;r>=0;r--)"0"===i[i.length-1]&&(i=i.substring(0,r));"."===(r=t+i).slice(-1)&&(r=r.substring(0,r.length-1))}return["","-0"].includes(r)&&(r="0"),r}function i(i,n){let e="";if("NaN"===(i=String(i)))e="0";else if(i.includes("e")){let t=parseInt(i.substring(i.indexOf("e")+1)),n=i.substring(parseFloat(i)>=0?0:1,i.includes(".")?i.indexOf("."):i.indexOf("e")),s=i.includes(".")?i.substring(i.indexOf(".")+1,i.indexOf("e")):"";if(t<0)e=r(t)+n+s;else{let i=(n+s+r(t)).split("");i.splice(t+1,0,"."),e=i.join("")}parseFloat(i)<0&&(e="-"+e)}else e=i;if(e.includes(".")){let r=e.substring(0,e.indexOf(".")+1),t=e.substring(e.indexOf(".")+1);void 0!==n&&t.length>n&&(t=t.substring(0,n)),e=r+t}return e=t(e),e}var n=1e6,e=1e6,s="[big.js] ",o=s+"Invalid ",c=o+"decimal places",u=o+"rounding mode",f=s+"Division by zero",l={},h=void 0,g=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function a(r,t,i,n){var e=r.c;if(i===h&&(i=r.constructor.RM),0!==i&&1!==i&&2!==i&&3!==i)throw Error(u);if(t<1)n=3===i&&(n||!!e[0])||0===t&&(1===i&&e[0]>=5||2===i&&(e[0]>5||5===e[0]&&(n||e[1]!==h))),e.length=1,n?(r.e=r.e-t+1,e[0]=1):e[0]=r.e=0;else if(t<e.length){if(n=1===i&&e[t]>=5||2===i&&(e[t]>5||5===e[t]&&(n||e[t+1]!==h||1&e[t-1]))||3===i&&(n||!!e[0]),e.length=t,n)for(;++e[--t]>9;)if(e[t]=0,0===t){++r.e,e.unshift(1);break}for(t=e.length;!e[--t];)e.pop()}return r}function d(r,t,i){var n=r.e,e=r.c.join(""),s=e.length;if(t)e=e.charAt(0)+(s>1?"."+e.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)e="0"+e;e="0."+e}else if(n>0)if(++n>s)for(n-=s;n--;)e+="0";else n<s&&(e=e.slice(0,n)+"."+e.slice(n));else s>1&&(e=e.charAt(0)+"."+e.slice(1));return r.s<0&&i?"-"+e:e}l.abs=function(){var r=new this.constructor(this);return r.s=1,r},l.cmp=function(r){var t,i=this,n=i.c,e=(r=new i.constructor(r)).c,s=i.s,o=r.s,c=i.e,u=r.e;if(!n[0]||!e[0])return n[0]?s:e[0]?-o:0;if(s!=o)return s;if(t=s<0,c!=u)return c>u^t?1:-1;for(o=(c=n.length)<(u=e.length)?c:u,s=-1;++s<o;)if(n[s]!=e[s])return n[s]>e[s]^t?1:-1;return c==u?0:c>u^t?1:-1},l.div=function(r){var t=this,i=t.constructor,e=t.c,s=(r=new i(r)).c,o=t.s==r.s?1:-1,u=i.DP;if(u!==~~u||u<0||u>n)throw Error(c);if(!s[0])throw Error(f);if(!e[0])return r.s=o,r.c=[r.e=0],r;var l,g,d,w,p,b=s.slice(),m=l=s.length,v=e.length,E=e.slice(0,l),x=E.length,O=r,N=O.c=[],M=0,P=u+(O.e=t.e-r.e)+1;for(O.s=o,o=P<0?0:P,b.unshift(0);x++<l;)E.push(0);do{for(d=0;d<10;d++){if(l!=(x=E.length))w=l>x?1:-1;else for(p=-1,w=0;++p<l;)if(s[p]!=E[p]){w=s[p]>E[p]?1:-1;break}if(!(w<0))break;for(g=x==l?s:b;x;){if(E[--x]<g[x]){for(p=x;p&&!E[--p];)E[p]=9;--E[p],E[x]+=10}E[x]-=g[x]}for(;!E[0];)E.shift()}N[M++]=w?d:++d,E[0]&&w?E[x]=e[m]||0:E=[e[m]]}while((m++<v||E[0]!==h)&&o--);return N[0]||1==M||(N.shift(),O.e--,P--),M>P&&a(O,P,i.RM,E[0]!==h),O},l.eq=function(r){return 0===this.cmp(r)},l.gt=function(r){return this.cmp(r)>0},l.gte=function(r){return this.cmp(r)>-1},l.lt=function(r){return this.cmp(r)<0},l.lte=function(r){return this.cmp(r)<1},l.minus=l.sub=function(r){var t,i,n,e,s=this,o=s.constructor,c=s.s,u=(r=new o(r)).s;if(c!=u)return r.s=-u,s.plus(r);var f=s.c.slice(),l=s.e,h=r.c,g=r.e;if(!f[0]||!h[0])return h[0]?r.s=-u:f[0]?r=new o(s):r.s=1,r;if(c=l-g){for((e=c<0)?(c=-c,n=f):(g=l,n=h),n.reverse(),u=c;u--;)n.push(0);n.reverse()}else for(i=((e=f.length<h.length)?f:h).length,c=u=0;u<i;u++)if(f[u]!=h[u]){e=f[u]<h[u];break}if(e&&(n=f,f=h,h=n,r.s=-r.s),(u=(i=h.length)-(t=f.length))>0)for(;u--;)f[t++]=0;for(u=t;i>c;){if(f[--i]<h[i]){for(t=i;t&&!f[--t];)f[t]=9;--f[t],f[i]+=10}f[i]-=h[i]}for(;0===f[--u];)f.pop();for(;0===f[0];)f.shift(),--g;return f[0]||(r.s=1,f=[g=0]),r.c=f,r.e=g,r},l.mod=function(r){var t,i=this,n=i.constructor,e=i.s,s=(r=new n(r)).s;if(!r.c[0])throw Error(f);return i.s=r.s=1,t=1==r.cmp(i),i.s=e,r.s=s,t?new n(i):(e=n.DP,s=n.RM,n.DP=n.RM=0,i=i.div(r),n.DP=e,n.RM=s,this.minus(i.times(r)))},l.neg=function(){var r=new this.constructor(this);return r.s=-r.s,r},l.plus=l.add=function(r){var t,i,n,e=this,s=e.constructor;if(r=new s(r),e.s!=r.s)return r.s=-r.s,e.minus(r);var o=e.e,c=e.c,u=r.e,f=r.c;if(!c[0]||!f[0])return f[0]||(c[0]?r=new s(e):r.s=e.s),r;if(c=c.slice(),t=o-u){for(t>0?(u=o,n=f):(t=-t,n=c),n.reverse();t--;)n.push(0);n.reverse()}for(c.length-f.length<0&&(n=f,f=c,c=n),t=f.length,i=0;t;c[t]%=10)i=(c[--t]=c[t]+f[t]+i)/10|0;for(i&&(c.unshift(i),++u),t=c.length;0===c[--t];)c.pop();return r.c=c,r.e=u,r},l.pow=function(r){var t=this,i=new t.constructor("1"),n=i,s=r<0;if(r!==~~r||r<-1e6||r>e)throw Error(o+"exponent");for(s&&(r=-r);1&r&&(n=n.times(t)),r>>=1;)t=t.times(t);return s?i.div(n):n},l.prec=function(r,t){if(r!==~~r||r<1||r>n)throw Error(o+"precision");return a(new this.constructor(this),r,t)},l.round=function(r,t){if(r===h)r=0;else if(r!==~~r||r<-n||r>n)throw Error(c);return a(new this.constructor(this),r+this.e+1,t)},l.sqrt=function(){var r,t,i,n=this,e=n.constructor,o=n.s,c=n.e,u=new e("0.5");if(!n.c[0])return new e(n);if(o<0)throw Error(s+"No square root");0===(o=Math.sqrt(n+""))||o===1/0?((t=n.c.join("")).length+c&1||(t+="0"),c=((c+1)/2|0)-(c<0||1&c),r=new e(((o=Math.sqrt(t))==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+c)):r=new e(o+""),c=r.e+(e.DP+=4);do{i=r,r=u.times(i.plus(n.div(i)))}while(i.c.slice(0,c).join("")!==r.c.slice(0,c).join(""));return a(r,(e.DP-=4)+r.e+1,e.RM)},l.times=l.mul=function(r){var t,i=this,n=i.constructor,e=i.c,s=(r=new n(r)).c,o=e.length,c=s.length,u=i.e,f=r.e;if(r.s=i.s==r.s?1:-1,!e[0]||!s[0])return r.c=[r.e=0],r;for(r.e=u+f,o<c&&(t=e,e=s,s=t,f=o,o=c,c=f),t=new Array(f=o+c);f--;)t[f]=0;for(u=c;u--;){for(c=0,f=o+u;f>u;)c=t[f]+s[u]*e[f-u-1]+c,t[f--]=c%10,c=c/10|0;t[f]=c}for(c?++r.e:t.shift(),u=t.length;!t[--u];)t.pop();return r.c=t,r},l.toExponential=function(r,t){var i=this,e=i.c[0];if(r!==h){if(r!==~~r||r<0||r>n)throw Error(c);for(i=a(new i.constructor(i),++r,t);i.c.length<r;)i.c.push(0)}return d(i,!0,!!e)},l.toFixed=function(r,t){var i=this,e=i.c[0];if(r!==h){if(r!==~~r||r<0||r>n)throw Error(c);for(r=r+(i=a(new i.constructor(i),r+i.e+1,t)).e+1;i.c.length<r;)i.c.push(0)}return d(i,!1,!!e)},l[Symbol.for("nodejs.util.inspect.custom")]=l.toJSON=l.toString=function(){var r=this,t=r.constructor;return d(r,r.e<=t.NE||r.e>=t.PE,!!r.c[0])},l.toNumber=function(){var r=Number(d(this,!0,!0));if(!0===this.constructor.strict&&!this.eq(r.toString()))throw Error(s+"Imprecise conversion");return r},l.toPrecision=function(r,t){var i=this,e=i.constructor,s=i.c[0];if(r!==h){if(r!==~~r||r<1||r>n)throw Error(o+"precision");for(i=a(new e(i),r,t);i.c.length<r;)i.c.push(0)}return d(i,r<=i.e||i.e<=e.NE||i.e>=e.PE,!!s)},l.valueOf=function(){var r=this,t=r.constructor;if(!0===t.strict)throw Error(s+"valueOf disallowed");return d(r,r.e<=t.NE||r.e>=t.PE,!0)};var w=function r(){function t(i){var n=this;if(!(n instanceof t))return i===h?r():new t(i);if(i instanceof t)n.s=i.s,n.e=i.e,n.c=i.c.slice();else{if("string"!=typeof i){if(!0===t.strict&&"bigint"!=typeof i)throw TypeError(o+"value");i=0===i&&1/i<0?"-0":String(i)}!function(r,t){var i,n,e;if(!g.test(t))throw Error(o+"number");r.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(i=t.indexOf("."))>-1&&(t=t.replace(".",""));(n=t.search(/e/i))>0?(i<0&&(i=n),i+=+t.slice(n+1),t=t.substring(0,n)):i<0&&(i=t.length);for(e=t.length,n=0;n<e&&"0"==t.charAt(n);)++n;if(n==e)r.c=[r.e=0];else{for(;e>0&&"0"==t.charAt(--e););for(r.e=i-n-1,r.c=[],i=0;n<=e;)r.c[i++]=+t.charAt(n++)}}(n,i)}n.constructor=t}return t.prototype=l,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=false,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}();class p{constructor(n,e=0){e=Number(e);let s=i(n);if(s.includes(".")){e+=s.length-1-s.indexOf("."),s=i(Number(s.replace(".","")))}"NaN"===s&&(s="0");const o=BigInt(s);this.origin={decimals:e,num:Number(s),str:s,bi:o},this.string=function(n,e){("string"!=typeof n||n.includes("e"))&&(n=i(n));const s=n.includes("-")||parseFloat(n)<0;if(s&&(n=n.replace("-","")),e>0){const t=(n+=r(e)).indexOf(".");if(t>=0){const r=n.substring(0,t),i=n.substring(t+1);n=r+(i.substring(0,e)+".")+i.substring(e)}}else if(e<0){let t=(n=r(-e)+n).indexOf(".");-1===t&&(t=n.length);const i=n.substring(0,t),s=n.substring(t+1);n=i.substring(0,i.length- -e)+"."+i.substring(i.length- -e)+s}return n=t(n),s&&(n="-"+n),n}(s,-e),this.number=Number(this.string)}static of(r,t){return new p(r,t)}map(r){return new p(r(this.string))}toString(){return this.string}toLocaleString(){return this.number.toLocaleString()}toIntStr(){return i(parseInt(this.number))}keepDecimals(r=2){return i(this.string,r)}mul(r){return r instanceof p||(r=new p(r)),new p(this.origin.bi*r.origin.bi,this.origin.decimals+r.origin.decimals)}div(r){return r instanceof p||(r=new p(r)),new p(new w(this.origin.str).div(r.origin.str),this.origin.decimals-r.origin.decimals)}plus(r){r instanceof p||(r=new p(r));const[t,n]=[this.origin.decimals,r.origin.decimals];return t!==n?t>n?new p(this.origin.bi+r.origin.bi*BigInt(i(Math.pow(10,t-n))),t):new p(this.origin.bi*BigInt(i(Math.pow(10,n-t)))+r.origin.bi,n):new p(this.origin.bi+r.origin.bi,t)}minus(r){r instanceof p||(r=new p(r));const[t,n]=[this.origin.decimals,r.origin.decimals];return t!==n?t>n?new p(this.origin.bi-r.origin.bi*BigInt(i(Math.pow(10,t-n))),t):new p(this.origin.bi*BigInt(i(Math.pow(10,n-t)))-r.origin.bi,n):new p(this.origin.bi-r.origin.bi,t)}}console.log(new p(.005).mul(2).div(4e18)),console.log(new p(.005).mul(2).div(4e18));
